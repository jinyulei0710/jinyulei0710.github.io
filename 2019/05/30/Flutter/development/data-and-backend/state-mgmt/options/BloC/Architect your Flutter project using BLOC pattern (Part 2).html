<hr>
<p>layout: post<br>title:  â€œ(è¯‘)ä½¿ç”¨BloCæ¨¡å¼æ¥æ¶æ„ä½ çš„Flutteré¡¹ç›®(ç¬¬äºŒéƒ¨åˆ†)â€<br>date:   2019-04-15 22:26:17 +0800<br>categories: </p>
<ul>
<li>Flutter å¼€å‘<br>tags:<ul>
<li>çŠ¶æ€ç®¡ç†</li>
<li>BLoC</li>
</ul>
</li>
</ul>
<hr>
<p><a href="https://medium.com/flutterpub/architect-your-flutter-project-using-bloc-pattern-part-2-d8dd1eca9ba5">åŸæ–‡é“¾æ¥</a></p>
<p>å—¨ä¼™è®¡ï¼æœ¬æ–‡æ˜¯æˆ‘ä¹‹å‰çš„æ–‡ç« â€œæ„å»ºæ‚¨çš„Flutteré¡¹ç›®â€çš„å»¶ç»­ã€‚æ­£å¦‚æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æ‰€æ‰¿è¯ºçš„é‚£æ ·ï¼Œæˆ‘å°†è§£å†³å½“å‰æ¶æ„è®¾è®¡ä¸­çš„ä¸€äº›ç¼ºé™·ï¼Œå¹¶ä¸ºæˆ‘ä»¬æ­£åœ¨æ„å»ºçš„åº”ç”¨ç¨‹åºæ·»åŠ ä¸€äº›æ–°åŠŸèƒ½ã€‚åœ¨å¼€å§‹æ—…ç¨‹ä¹‹å‰ï¼Œè®©æˆ‘å‘ä½ å±•ç¤ºå››ä¸ªæˆ‘ä»¬è¦æ¶‰åŠçš„åœ°æ–¹å¹¶å¯¹å®ƒä»¬è¿›è¡Œå­¦ä¹ ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­ä»‹ç»çš„è¯é¢˜ã€‚</p>
<h2 id="æˆ‘ä»¬å°†è®¨è®ºçš„è¯é¢˜ï¼š"><a href="#æˆ‘ä»¬å°†è®¨è®ºçš„è¯é¢˜ï¼š" class="headerlink" title="æˆ‘ä»¬å°†è®¨è®ºçš„è¯é¢˜ï¼š"></a>æˆ‘ä»¬å°†è®¨è®ºçš„è¯é¢˜ï¼š</h2><ol>
<li>è§£å†³å½“å‰æ¶æ„è®¾è®¡ä¸­çš„ç¼ºé™·</li>
<li>å•å®ä¾‹ä¸èŒƒå›´æœ‰é™çš„å®ä¾‹ï¼ˆBLoCè®¿é—®ï¼‰</li>
<li>å¯¼èˆª</li>
<li>RxDartçš„å˜å½¢<br>æ³¨æ„ï¼šåœ¨çœ‹ä¸‹å»ä¹‹å‰ã€‚æˆ‘å¼ºçƒˆå»ºè®®æ‚¨é˜…è¯»æˆ‘ä¹‹å‰çš„æ–‡ç« ï¼Œä»¥ä¾¿æ›´å¥½åœ°äº†è§£æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„åº”ç”¨ç¨‹åºä»¥åŠæˆ‘ä»¬æ­£åœ¨éµå¾ªçš„æ¶æ„è®¾è®¡ï¼ˆBLoCæ¨¡å¼ï¼‰ã€‚</li>
</ol>
<!--more-->


<h2 id="å½“å‰æ¶æ„è®¾è®¡ä¸­çš„ç¼ºé™·"><a href="#å½“å‰æ¶æ„è®¾è®¡ä¸­çš„ç¼ºé™·" class="headerlink" title="å½“å‰æ¶æ„è®¾è®¡ä¸­çš„ç¼ºé™·"></a>å½“å‰æ¶æ„è®¾è®¡ä¸­çš„ç¼ºé™·</h2><p>åœ¨è§£å†³é—®é¢˜æˆ–è®¨è®ºå˜åŒ–ä¹‹å‰ã€‚å¦‚æœä½ ä»¬è¯»è¿‡ä¸Šç¯‡æ–‡ç« çš„è¯ï¼Œæˆ‘æƒ³ä½ ä»¬éƒ½ä¸€å®šåœ¨ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè®©æˆ‘æ¥å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä¸ºä»€ä¹ˆä½ æ²¡æœ‰æ›´æ–°ä¸Šä¸€ç¯‡æ–‡ç« è€Œä¸æ˜¯å†™ä¸€ç¯‡æ–°çš„æ–‡ç« ï¼Ÿ</p>
<p>æ˜¯!å½“ç„¶æˆ‘å½“ç„¶å¯ä»¥è¿™æ ·åšçš„ã€‚æˆ‘å¯ä»¥ç›´æ¥å‘æ‚¨å±•ç¤ºä¸€ä¸ªå¯ä»¥è®©æ‚¨æ»¡æ„çš„å¯ä»¥å·¥ä½œå’Œæ— é”™è¯¯çš„ä»£ç ã€‚ä½†åœ¨è¿™é‡Œï¼Œæˆ‘æƒ³å‘Šè¯‰ä½ åœ¨æ„å»ºè¿™ä¸ªåº”ç”¨ç¨‹åºæ—¶æ‰€ç»å†çš„ä¸€åˆ‡ã€‚æˆ‘é‡åˆ°çš„é—®é¢˜æˆ–å¤±è´¥ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥æ„å»ºä»»ä½•Flutteråº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨å®Œæˆæ•´ä¸ªè¿‡ç¨‹æ—¶è°ƒè¯•æˆ–è§£å†³æ‚¨é‡åˆ°çš„ä»»ä½•é—®é¢˜ã€‚ä¸è¦åºŸè¯ï¼Œè®©æˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„ç›®æ ‡ã€‚</p>
<p>å¦‚æœä½ å·²ç»çœ‹è¿‡æˆ‘ä¹‹å‰çš„æ–‡ç« å’Œä»£ç ï¼Œç¬¬ä¸€ä¸ªç¼ºé™·æ˜¯æˆ‘åœ¨MoviesBlocç±»ä¸­åˆ›å»ºäº†ä¸€ä¸ªåä¸ºdispose()çš„æ–¹æ³•ã€‚æ­¤æ–¹æ³•è´Ÿè´£å…³é—­æ‰€æœ‰æ‰“å¼€çš„æµä»¥é¿å…å†…å­˜æ³„æ¼ã€‚æˆ‘åˆ›å»ºäº†è¯¥æ–¹æ³•ï¼Œä½†ä»æœªåœ¨movie_list.dartæ–‡ä»¶ä¸­çš„ä»»ä½•ä½ç½®è°ƒç”¨å®ƒï¼Œè¿™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚å¦ä¸€ä¸ªä¸»è¦ç¼ºé™·æ˜¯æˆ‘åœ¨æ„å»ºæ–¹æ³•ä¸­è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œè¿™æ˜¯éå¸¸å±é™©çš„ã€‚è®©æˆ‘ä»¬è¯•ç€è§£å†³è¿™ä¸¤ä¸ªä¸»è¦ç¼ºé™·ã€‚</p>
<p>ç›®å‰ï¼ŒMovieListç±»æ˜¯ä¸€ä¸ªStatelessWidgetï¼Œè€ŒStatelessWidgetçš„å·¥ä½œæ–¹å¼æ˜¯ï¼Œæ·»åŠ åˆ°Widgetæ ‘ä¸Šçš„æ—¶å€™build()æ–¹æ³•è¢«è°ƒç”¨ï¼Œå®ƒçš„æ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸å¯å˜çš„ã€‚buildæ–¹æ³•æ˜¯å…¥å£ï¼Œç”±äºé…ç½®æ›´æ”¹ä¼šè¢«å¤šæ¬¡è°ƒç”¨ã€‚æ‰€ä»¥å®ƒä¸æ˜¯è¿›è¡Œä»»ä½•ç½‘ç»œè¯·æ±‚çš„å¥½åœ°æ–¹ï¼ˆæˆ‘åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­åšè¿‡ï¼‰ã€‚æˆ‘ä»¬ç”šè‡³åœ¨StatelessWidgetä¸­æ²¡æœ‰ä¸€ä¸ªå¯ä»¥åœ¨å…¶ä¸­è°ƒç”¨blocçš„disposeæ–¹æ³•ã€‚æˆ‘ä»¬å¿…é¡»æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥è¿›è¡Œç½‘ç»œè¯·æ±‚çš„åœ°æ–¹ï¼Œæœ€åè°ƒç”¨disposeæ–¹æ³•ã€‚</p>
<p>è¦ç‚¹æ˜¯StatelessWidgetåƒStatefulWidgeté‚£æ ·æä¾›initStateå’Œdisposeæ–¹æ³•ã€‚é¦–å…ˆè°ƒç”¨StatefulWidgetä¸­çš„initStateæ–¹æ³•æ¥åˆ†é…èµ„æºï¼Œå¹¶åœ¨å¤„ç†è¿™äº›åˆ†é…çš„èµ„æºæ—¶è°ƒç”¨disposeæ–¹æ³•(æ›´å¤šè¯¦ç»†å†…å®¹è¯·çœ‹<a href="https://docs.flutter.io/flutter/widgets/StatefulWidget-class.html">è¿™é‡Œ</a>ï¼‰ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬å°†MovieListç±»ä»StatelessWidgetè½¬æ¢ä¸ºStatefulWidgetï¼Œå¹¶åœ¨StatefulWidgetå†…çš„initState()ä½œå‡ºç½‘ç»œè¯·æ±‚ï¼Œåœ¨StatefulWidgetå†…çš„dispose()è°ƒç”¨MovieBlocçš„dispose()ã€‚</p>
<p>åªéœ€ç”¨ä¸‹é¢çš„å®ç°æ›¿æ¢movie_list.dartä»£ç å³å¯ã€‚</p>
<pre><code class="dart"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;
<span class="keyword">import</span> <span class="string">'../models/item_model.dart'</span>;
<span class="keyword">import</span> <span class="string">'../blocs/movies_bloc.dart'</span>;

<span class="class"><span class="keyword">class</span> <span class="title">MovieList</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>{
  <span class="meta">@override</span>
  State&lt;StatefulWidget&gt; createState() {
    <span class="keyword">return</span> MovieListState();
  }
}

<span class="class"><span class="keyword">class</span> <span class="title">MovieListState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MovieList</span>&gt; </span>{
  <span class="meta">@override</span>
  <span class="keyword">void</span> initState() {
    <span class="keyword">super</span>.initState();
    bloc.fetchAllMovies();
  }

  <span class="meta">@override</span>
  <span class="keyword">void</span> dispose() {
    bloc.dispose();
    <span class="keyword">super</span>.dispose();
  }

  <span class="meta">@override</span>
  Widget build(BuildContext context) {
    <span class="keyword">return</span> Scaffold(
      appBar: AppBar(
        title: Text(<span class="string">'Popular Movies'</span>),
      ),
      body: StreamBuilder(
        stream: bloc.allMovies,
        builder: (context, AsyncSnapshot&lt;ItemModel&gt; snapshot) {
          <span class="keyword">if</span> (snapshot.hasData) {
            <span class="keyword">return</span> buildList(snapshot);
          } <span class="keyword">else</span> <span class="keyword">if</span> (snapshot.hasError) {
            <span class="keyword">return</span> Text(snapshot.error.toString());
          }
          <span class="keyword">return</span> Center(child: CircularProgressIndicator());
        },
      ),
    );
  }

  Widget buildList(AsyncSnapshot&lt;ItemModel&gt; snapshot) {
    <span class="keyword">return</span> GridView.builder(
        itemCount: snapshot.data.results.length,
        gridDelegate:
            <span class="keyword">new</span> SliverGridDelegateWithFixedCrossAxisCount(crossAxisCount: <span class="number">2</span>),
        itemBuilder: (BuildContext context, <span class="built_in">int</span> index) {
          <span class="keyword">return</span> GridTile(
            child: Image.network(
              <span class="string">'https://image.tmdb.org/t/p/w185<span class="subst">${snapshot.data</span></span>
<span class="string"><span class="subst">                  .results[index].poster_path}</span>'</span>,
              fit: BoxFit.cover,
            ),
          );
        });
  }
}</code></pre>
<p>åœ¨ä»¥ä¸Šçš„ä»£ç ä¸­ï¼Œæˆ‘åœ¨initState()ä¸­è°ƒç”¨äº†bloc.fetchAllMovies()ï¼Œåœ¨MovieListStateç±»çš„dispose()ä¸­è°ƒç”¨äº†bloc.dispose()ã€‚è¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œä½ å¯ä»¥åƒå¾€å¸¸ä¸€æ ·çœ‹åˆ°åŠ è½½ç”µå½±åˆ—è¡¨çš„åº”ç”¨ç¨‹åºã€‚ä½ ä¸ä¼šçœ‹åˆ°ä»»ä½•è§†è§‰ä¸Šçš„å˜åŒ–ï¼Œä½†åœ¨å†…éƒ¨ä½ å·²ç»ç¡®å®šï¼Œä¸ä¼šæœ‰ä»»ä½•å¤šæ¬¡çš„ç½‘ç»œè¯·æ±‚ï¼Œä¹Ÿä¸ä¼šæœ‰ä»»ä½•å†…å­˜æ³„æ¼ã€‚å“‡ï¼è¿™çœ‹èµ·æ¥å¾ˆæ•´æ´ã€‚ ğŸ˜</p>
<p>ä¸»é¢˜æ¼”è®²ï¼šæ°¸è¿œä¸è¦åœ¨æ„å»ºæ–¹æ³•ä¸­è¿›è¡Œä»»ä½•ç½‘ç»œæˆ–æ•°æ®åº“è°ƒç”¨ï¼Œå¹¶å§‹ç»ˆç¡®ä¿å…³é—­å¤„äºå¼€å¯çŠ¶æ€çš„æµã€‚</p>
<h2 id="æ–°çš„åŠŸèƒ½å®ç°"><a href="#æ–°çš„åŠŸèƒ½å®ç°" class="headerlink" title="æ–°çš„åŠŸèƒ½å®ç°"></a>æ–°çš„åŠŸèƒ½å®ç°</h2><p>ç°åœ¨æ˜¯æˆ‘ä»¬ä¸ºç°æœ‰åº”ç”¨æ·»åŠ æ–°åŠŸèƒ½çš„æ—¶å€™äº†ã€‚åœ¨æˆ‘ä»¬å¼€å§‹è®¨è®ºæˆ–å®ç°æ–°åŠŸèƒ½ä¹‹å‰ã€‚è®©æˆ‘å‘ä½ å±•ç¤ºä¸€ä¸‹ã€‚è¿™æ˜¯ä¸€ä¸ªå°è§†é¢‘ã€‚</p>
<p>å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªçš„é¡µé¢ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­æŸ¥çœ‹ä»åˆ—è¡¨ä¸­é€‰æ‹©çš„ç‰¹å®šç”µå½±çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h2 id="è®©æˆ‘ä»¬è§„åˆ’ä¸‹åº”ç”¨æµç¨‹"><a href="#è®©æˆ‘ä»¬è§„åˆ’ä¸‹åº”ç”¨æµç¨‹" class="headerlink" title="è®©æˆ‘ä»¬è§„åˆ’ä¸‹åº”ç”¨æµç¨‹"></a>è®©æˆ‘ä»¬è§„åˆ’ä¸‹åº”ç”¨æµç¨‹</h2><p>åœ¨å‘åº”ç”¨æ·»åŠ ä»»ä½•æ–°åŠŸèƒ½ä¹‹å‰ï¼Œæœ€å¥½å…ˆåšä¸€äº›æ¡ˆå¤´å·¥ä½œ(å†³å®šæµç¨‹)ã€‚æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘åˆ†äº«äº†æˆ‘åœ¨åˆ†æåº”ç”¨ç¨‹åºçš„æ‰€æœ‰åŠŸèƒ½åæƒ³å‡ºçš„åº”ç”¨ç¨‹åºæµç¨‹ã€‚</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*dkKlfFewf6CBVbwFIeCNHQ.png" alt></p>
<p>æˆ‘æƒ³å¤§å¤šæ•°äººåœ¨çœ‹å®Œå›¾è¡¨åéƒ½ä¼šå¾ˆå®¹æ˜“ç†è§£è¿™ä¸ªæµç¨‹ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„æ–°æœ¯è¯­å¾ˆå°‘ã€‚ä½†æ˜¯æˆ‘ä»ç„¶è¦è§£é‡Šä¸‹ä¸Šé¢çš„å›¾è¡¨ã€‚</p>
<ol>
<li>ç”µå½±åˆ—è¡¨é¡µé¢ï¼šè¿™æ˜¯ä½ å¯ä»¥çœ‹åˆ°æ‰€æœ‰ç”µå½±çš„ç½‘æ ¼åˆ—è¡¨çš„é¡µé¢ã€‚</li>
<li>ç”µå½±åˆ—è¡¨BloCï¼šè¿™æ˜¯æ ¹æ®éœ€è¦ä»å­˜å‚¨åº“è·å–æ•°æ®å¹¶å°†å…¶ä¼ é€’åˆ°ç”µå½±åˆ—è¡¨é¡µé¢çš„æ¡¥æ¢(éšåæˆ‘å°†å¯¹å•ä¾‹æœºè¿›è¡Œè§£é‡Š)ã€‚</li>
<li>ç”µå½±è¯¦ç»†ä¿¡æ¯é¡µé¢ï¼šåœ¨æ­¤é¡µé¢ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°ä»åˆ—è¡¨å±å¹•ä¸­é€‰æ‹©çš„ç”µå½±çš„è¯¦ç»†ä¿¡æ¯ã€‚åœ¨è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°ç”µå½±çš„åç§°ï¼Œè¯„çº§ï¼Œå‘å¸ƒæ—¥æœŸï¼Œæè¿°å’Œé¢„å‘Šç‰‡ï¼ˆæˆ‘éšåå°†è§£é‡ŠèŒƒå›´æœ‰é™çš„å®ä¾‹ï¼‰ã€‚</li>
<li>ä»“åº“ï¼šè¿™æ˜¯æ§åˆ¶æ•°æ®æµçš„ä¸­å¿ƒç‚¹ã€‚</li>
<li>APIæä¾›è€…ï¼šæŒæœ‰äº†ç½‘ç»œè¯·æ±‚çš„å®ç°ã€‚</li>
</ol>
<p>ç°åœ¨ä½ ä¸€å®šåœ¨æƒ³ã€‚ä»€ä¹ˆæ˜¯å›¾ä¸­çš„â€œå•ä¾‹å’ŒèŒƒå›´æœ‰é™çš„å®ä¾‹â€ã€‚è®©æˆ‘ä»¬è¯¦ç»†äº†è§£å®ƒä»¬ã€‚</p>
<h2 id="å•ä¾‹ä¸èŒƒå›´æœ‰é™çš„å®ä¾‹"><a href="#å•ä¾‹ä¸èŒƒå›´æœ‰é™çš„å®ä¾‹" class="headerlink" title="å•ä¾‹ä¸èŒƒå›´æœ‰é™çš„å®ä¾‹"></a>å•ä¾‹ä¸èŒƒå›´æœ‰é™çš„å®ä¾‹</h2><p>å¦‚å›¾æ‰€ç¤ºï¼Œä¸¤ä¸ªé¡µé¢éƒ½å¯ä»¥è®¿é—®å„è‡ªçš„BLoCç±»ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å°†è¿™äº›BLoCç±»æš´éœ²ç»™å„è‡ªçš„é¡µé¢ï¼Œå³å•ä¾‹æˆ–èŒƒå›´æœ‰é™çš„å®ä¾‹ã€‚å½“æˆ‘è¯´Single Instanceæ—¶ï¼Œæˆ‘çš„æ„æ€æ˜¯BLoCç±»çš„å•ä¸ªå¼•ç”¨ï¼ˆSingletonï¼‰å°†æš´éœ²ç»™é¡µé¢ã€‚å¯ä»¥ä»åº”ç”¨ç¨‹åºçš„ä»»ä½•éƒ¨åˆ†è®¿é—®æ­¤ç±»å‹çš„BLoCç±»ã€‚ä»»ä½•å±å¹•éƒ½å¯ä»¥ä½¿ç”¨å•å®ä¾‹BLoCç±»ã€‚</p>
<p>ä½†æ˜¯Scoped Instance BLoCç±»å…·æœ‰æœ‰é™çš„è®¿é—®æƒé™ã€‚æˆ‘çš„æ„æ€æ˜¯å®ƒåªå¯¹ä¸å®ƒç›¸å…³è”é¡µé¢æˆ–è¿™æš´éœ²ç»™çš„é¡µé¢æ˜¯å¯è®¿é—®çš„ã€‚è¿™æ˜¯æœ‰ä¸€ä¸ªå¯¹å…¶è¿›è¡Œè§£é‡Šçš„å°å›¾ã€‚</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*rID6hLMzUfIwSA6m8UkM2g.png" alt></p>
<p>æ­£å¦‚ä½ åœ¨ä¸Šå›¾ä¸­æ‰€çœ‹åˆ°çš„ï¼Œåªæœ‰widgetå’Œé¡µé¢ä¸‹æ–¹çš„å…¶ä»–2ä¸ªè‡ªå®šä¹‰widgetèƒ½è®¿é—®blocã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯InheritedWidgetï¼Œå®ƒå°†BLoCä¿å­˜åœ¨å…¶ä¸­ã€‚InheritedWidgetå°† Screen widgetè¿›è¡ŒåŒ…è£…ï¼Œè®©Screen widgetåŠå…¶ä¸‹æ–¹çš„widgetå¯ä»¥è®¿é—®BLoCã€‚Screen Widgetçš„çˆ¶widgetéƒ½æ— æ³•è®¿é—®BLoCã€‚</p>
<p>å¸Œæœ›æ‚¨äº†è§£å•ä¾‹å’ŒèŒƒå›´æœ‰é™çš„å®ä¾‹ä¹‹é—´çš„åŒºåˆ«ã€‚å½“æ‚¨ä½¿ç”¨å°å‹åº”ç”¨ç¨‹åºæ—¶ï¼Œå•ä¾‹è®¿é—®BLoCçš„æ–¹å¼éå¸¸æœ‰ç”¨ã€‚ä½†æ˜¯å¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œé‚£ä¹ˆèŒƒå›´æœ‰é™çš„å®ä¾‹æ˜¯é¦–é€‰æ–¹å¼ã€‚</p>
<h2 id="æ·»åŠ è¯¦æƒ…é¡µ"><a href="#æ·»åŠ è¯¦æƒ…é¡µ" class="headerlink" title="æ·»åŠ è¯¦æƒ…é¡µ"></a>æ·»åŠ è¯¦æƒ…é¡µ</h2><p>æ˜¯æ—¶å€™å°†è¯¦æƒ…é¡µæ·»åŠ åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ã€‚è¯¦æƒ…é¡µèƒŒåçš„é€»è¾‘æ˜¯ï¼Œç”¨æˆ·å°†ç‚¹å‡»ç”µå½±åˆ—è¡¨ä¸­çš„ç”µå½±æ¡ç›®ã€‚ç”¨æˆ·å°†è¿›å…¥è¯¦æƒ…é¡µï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­æŸ¥çœ‹ç”µå½±çš„è¯¦ç»†ä¿¡æ¯ã€‚ä¸€äº›ç»†èŠ‚ï¼ˆç”µå½±åç§°ï¼Œè¯„çº§ï¼Œå‘å¸ƒæ—¥æœŸï¼Œæè¿°ï¼Œæµ·æŠ¥ï¼‰å°†ä»åˆ—è¡¨é¡µé¢ä¼ é€’åˆ°è¯¦æƒ…é¡µã€‚é¢„å‘Šç‰‡å°†ä»æœåŠ¡å™¨åŠ è½½ã€‚è®©æˆ‘ä»¬æŠŠè´­ç‰©è½¦éƒ¨åˆ†æ”¾åœ¨ä¸€è¾¹ï¼Œå…ˆä¸“æ³¨äºæ˜¾ç¤ºä»åˆ—è¡¨é¡µé¢ä¼ é€’è€Œæ¥çš„æ•°æ®ã€‚</p>
<p>åœ¨åˆ›å»ºæ–‡ä»¶ä¹‹å‰ï¼Œæˆ‘å¸Œæœ›ä½ ä½¿ç”¨ä¸ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æåˆ°ç›¸åŒçš„é¡¹ç›®ç»“æ„ã€‚å¦‚æœæ˜¯ä¸€æ ·çš„ç»“æ„ï¼Œåˆ™åœ¨uiåŒ…å†…åˆ›å»ºä¸€ä¸ªåä¸ºmovie_detail.dartçš„æ–‡ä»¶ã€‚å¤åˆ¶å°†ä»¥ä¸‹ä»£ç ç²˜è´´åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="dart"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;

<span class="class"><span class="keyword">class</span> <span class="title">MovieDetail</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>{
  <span class="keyword">final</span> posterUrl;
  <span class="keyword">final</span> description;
  <span class="keyword">final</span> releaseDate;
  <span class="keyword">final</span> <span class="built_in">String</span> title;
  <span class="keyword">final</span> <span class="built_in">String</span> voteAverage;
  <span class="keyword">final</span> <span class="built_in">int</span> movieId;

  MovieDetail({
    <span class="keyword">this</span>.title,
    <span class="keyword">this</span>.posterUrl,
    <span class="keyword">this</span>.description,
    <span class="keyword">this</span>.releaseDate,
    <span class="keyword">this</span>.voteAverage,
    <span class="keyword">this</span>.movieId,
  });

  <span class="meta">@override</span>
  State&lt;StatefulWidget&gt; createState() {
    <span class="keyword">return</span> MovieDetailState(
      title: title,
      posterUrl: posterUrl,
      description: description,
      releaseDate: releaseDate,
      voteAverage: voteAverage,
      movieId: movieId,
    );
  }
}

<span class="class"><span class="keyword">class</span> <span class="title">MovieDetailState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MovieDetail</span>&gt; </span>{
  <span class="keyword">final</span> posterUrl;
  <span class="keyword">final</span> description;
  <span class="keyword">final</span> releaseDate;
  <span class="keyword">final</span> <span class="built_in">String</span> title;
  <span class="keyword">final</span> <span class="built_in">String</span> voteAverage;
  <span class="keyword">final</span> <span class="built_in">int</span> movieId;

  MovieDetailState({
    <span class="keyword">this</span>.title,
    <span class="keyword">this</span>.posterUrl,
    <span class="keyword">this</span>.description,
    <span class="keyword">this</span>.releaseDate,
    <span class="keyword">this</span>.voteAverage,
    <span class="keyword">this</span>.movieId,
  });

  <span class="meta">@override</span>
  Widget build(BuildContext context) {
    <span class="keyword">return</span> Scaffold(
      body: SafeArea(
        top: <span class="keyword">false</span>,
        bottom: <span class="keyword">false</span>,
        child: NestedScrollView(
          headerSliverBuilder: (BuildContext context, <span class="built_in">bool</span> innerBoxIsScrolled) {
            <span class="keyword">return</span> &lt;Widget&gt;[
              SliverAppBar(
                expandedHeight: <span class="number">200.0</span>,
                floating: <span class="keyword">false</span>,
                pinned: <span class="keyword">true</span>,
                elevation: <span class="number">0.0</span>,
                flexibleSpace: FlexibleSpaceBar(
                    background: Image.network(
                  <span class="string">"https://image.tmdb.org/t/p/w500<span class="subst">$posterUrl</span>"</span>,
                  fit: BoxFit.cover,
                )),
              ),
            ];
          },
          body: Padding(
            padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">10.0</span>),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: &lt;Widget&gt;[
                Container(margin: EdgeInsets.only(top: <span class="number">5.0</span>)),
                Text(
                  title,
                  style: TextStyle(
                    fontSize: <span class="number">25.0</span>,
                    fontWeight: FontWeight.bold,
                  ),
                ),
                Container(margin: EdgeInsets.only(top: <span class="number">8.0</span>, bottom: <span class="number">8.0</span>)),
                Row(
                  children: &lt;Widget&gt;[
                    Icon(
                      Icons.favorite,
                      color: Colors.red,
                    ),
                    Container(
                      margin: EdgeInsets.only(left: <span class="number">1.0</span>, right: <span class="number">1.0</span>),
                    ),
                    Text(
                      voteAverage,
                      style: TextStyle(
                        fontSize: <span class="number">18.0</span>,
                      ),
                    ),
                    Container(
                      margin: EdgeInsets.only(left: <span class="number">10.0</span>, right: <span class="number">10.0</span>),
                    ),
                    Text(
                      releaseDate,
                      style: TextStyle(
                        fontSize: <span class="number">18.0</span>,
                      ),
                    ),
                  ],
                ),
                Container(margin: EdgeInsets.only(top: <span class="number">8.0</span>, bottom: <span class="number">8.0</span>)),
                Text(description),
              ],
            ),
          ),
        ),
      ),
    );
  }
}</code></pre>
<p>æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œæ­¤ç±»çš„æ„é€ å‡½æ•°éœ€è¦å¾ˆå°‘çš„å‚æ•°ã€‚è¿™äº›æ•°æ®å°†ä»åˆ—è¡¨å±å¹•æä¾›ç»™æ­¤ç±»ã€‚ä¸‹ä¸€æ­¥æ˜¯å®ç°å¯¼èˆªé€»è¾‘ï¼Œå°†æˆ‘ä»¬ä»åˆ—è¡¨é¡µé¢è·³è½¬åˆ°è¯¦æƒ…é¡µã€‚</p>
<h2 id="å¯¼èˆª"><a href="#å¯¼èˆª" class="headerlink" title="å¯¼èˆª"></a>å¯¼èˆª</h2><p>åœ¨Flutterä¸­å¦‚æœè¦ä»ä¸€ä¸ªé¡µé¢è·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Navigatorç±»ã€‚è®©æˆ‘ä»¬åœ¨movie_list.dartæ–‡ä»¶ä¸­å®ç°å¯¼èˆªé€»è¾‘ã€‚</p>
<p>å› æ­¤ï¼Œæƒ³æ³•æ˜¯ï¼Œåœ¨ç‚¹å‡»æ¯ä¸ªç½‘æ ¼é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†æ‰“å¼€è¯¦æƒ…é¡µå¹¶æ˜¾ç¤ºæˆ‘ä»¬ä»åˆ—è¡¨é¡µé¢ä¼ é€’åˆ°è¯¦æƒ…é¡µçš„å†…å®¹ã€‚è¿™æ˜¯movie_list.dartæ–‡ä»¶çš„ä»£ç ã€‚</p>
<pre><code class="dart"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;
<span class="keyword">import</span> <span class="string">'../models/item_model.dart'</span>;
<span class="keyword">import</span> <span class="string">'../blocs/movies_bloc.dart'</span>;
<span class="keyword">import</span> <span class="string">'movie_detail.dart'</span>;

<span class="class"><span class="keyword">class</span> <span class="title">MovieList</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>{
  <span class="meta">@override</span>
  State&lt;StatefulWidget&gt; createState() {
    <span class="keyword">return</span> MovieListState();
  }
}

<span class="class"><span class="keyword">class</span> <span class="title">MovieListState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MovieList</span>&gt; </span>{
  <span class="meta">@override</span>
  <span class="keyword">void</span> initState() {
    <span class="keyword">super</span>.initState();
    bloc.fetchAllMovies();
  }

  <span class="meta">@override</span>
  <span class="keyword">void</span> dispose() {
    bloc.dispose();
    <span class="keyword">super</span>.dispose();
  }

  <span class="meta">@override</span>
  Widget build(BuildContext context) {
    <span class="keyword">return</span> Scaffold(
      appBar: AppBar(
        title: Text(<span class="string">'Popular Movies'</span>),
      ),
      body: StreamBuilder(
        stream: bloc.allMovies,
        builder: (context, AsyncSnapshot&lt;ItemModel&gt; snapshot) {
          <span class="keyword">if</span> (snapshot.hasData) {
            <span class="keyword">return</span> buildList(snapshot);
          } <span class="keyword">else</span> <span class="keyword">if</span> (snapshot.hasError) {
            <span class="keyword">return</span> Text(snapshot.error.toString());
          }
          <span class="keyword">return</span> Center(child: CircularProgressIndicator());
        },
      ),
    );
  }

  Widget buildList(AsyncSnapshot&lt;ItemModel&gt; snapshot) {
    <span class="keyword">return</span> GridView.builder(
        itemCount: snapshot.data.results.length,
        gridDelegate:
        <span class="keyword">new</span> SliverGridDelegateWithFixedCrossAxisCount(crossAxisCount: <span class="number">2</span>),
        itemBuilder: (BuildContext context, <span class="built_in">int</span> index) {
          <span class="keyword">return</span> GridTile(
            child: InkResponse(
              enableFeedback: <span class="keyword">true</span>,
              child: Image.network(
                <span class="string">'https://image.tmdb.org/t/p/w185<span class="subst">${snapshot.data</span></span>
<span class="string"><span class="subst">                    .results[index].poster_path}</span>'</span>,
                fit: BoxFit.cover,
              ),
              onTap: () =&gt; openDetailPage(snapshot.data, index),
            ),
          );
        });
  }

  openDetailPage(ItemModel data, <span class="built_in">int</span> index) {
    Navigator.push(
      context,
      MaterialPageRoute(builder: (context) {
        <span class="keyword">return</span> MovieDetail(
          title: data.results[index].title,
          posterUrl: data.results[index].backdrop_path,
          description: data.results[index].overview,
          releaseDate: data.results[index].release_date,
          voteAverage: data.results[index].vote_average.toString(),
          movieId: data.results[index].id,
        );
      }),
    );
  }
}</code></pre>
<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°openDetailPage()æ–¹æ³•å…·æœ‰å¯¼èˆªé€»è¾‘ã€‚æˆ‘ä»¬å°†ä¼ é€’å°†åœ¨è¯¦æƒ…é¡µä¸­æ˜¾ç¤ºçš„æ•°æ®ã€‚è¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥è·³è½¬åˆ°æ–°é¡µé¢ã€‚</p>
<p>å“‡ï¼æˆ‘å¯ä»¥è·³è½¬äº†ğŸ˜<br>ç°åœ¨æ˜¯æ—¶å€™åœ¨è¯¦æƒ…é¡µé¢æ˜¾ç¤ºé¢„å‘Šç‰‡äº†ã€‚è®©æˆ‘ä»¬ç†Ÿæ‚‰ä¸‹ä»æœåŠ¡å™¨è·å–é¢„å‘Šç‰‡æ‰€éœ€çš„APIã€‚ç‚¹å‡»ä»¥ä¸‹é“¾æ¥å°±èƒ½è·å¾—JSONå“åº”ä½“ã€‚</p>
<p><a href="https://api.themoviedb.org/3/movie/">https://api.themoviedb.org/3/movie/</a><movie_id>/videos?api_key=your_api_key</movie_id></p>
<p>åœ¨ä¸Šé¢çš„APIä¸­ï¼Œæˆ‘ä»¬å¿…é¡»è¾“å…¥ä¸¤ä¸ªä¸œè¥¿ã€‚ç¬¬ä¸€ä¸ªæ˜¯movie_idï¼Œç¬¬äºŒä¸ªæ˜¯apiå¯†é’¥ã€‚è¿™æ˜¯ç‚¹å‡»é“¾æ¥åè¿”å›çš„å“åº”ä½“ã€‚</p>
<pre><code class="json">{
  <span class="attr">"id"</span>: <span class="number">299536</span>,
  <span class="attr">"results"</span>: [
    {
      <span class="attr">"id"</span>: <span class="string">"5a200baa925141033608f5f0"</span>,
      <span class="attr">"iso_639_1"</span>: <span class="string">"en"</span>,
      <span class="attr">"iso_3166_1"</span>: <span class="string">"US"</span>,
      <span class="attr">"key"</span>: <span class="string">"6ZfuNTqbHE8"</span>,
      <span class="attr">"name"</span>: <span class="string">"Official Trailer"</span>,
      <span class="attr">"site"</span>: <span class="string">"YouTube"</span>,
      <span class="attr">"size"</span>: <span class="number">1080</span>,
      <span class="attr">"type"</span>: <span class="string">"Trailer"</span>
    },
    {
      <span class="attr">"id"</span>: <span class="string">"5a200bcc925141032408d21b"</span>,
      <span class="attr">"iso_639_1"</span>: <span class="string">"en"</span>,
      <span class="attr">"iso_3166_1"</span>: <span class="string">"US"</span>,
      <span class="attr">"key"</span>: <span class="string">"sAOzrChqmd0"</span>,
      <span class="attr">"name"</span>: <span class="string">"Action...Avengers: Infinity War"</span>,
      <span class="attr">"site"</span>: <span class="string">"YouTube"</span>,
      <span class="attr">"size"</span>: <span class="number">720</span>,
      <span class="attr">"type"</span>: <span class="string">"Clip"</span>
    },
    {
      <span class="attr">"id"</span>: <span class="string">"5a200bdd0e0a264cca08d39f"</span>,
      <span class="attr">"iso_639_1"</span>: <span class="string">"en"</span>,
      <span class="attr">"iso_3166_1"</span>: <span class="string">"US"</span>,
      <span class="attr">"key"</span>: <span class="string">"3VbHg5fqBYw"</span>,
      <span class="attr">"name"</span>: <span class="string">"Trailer Tease"</span>,
      <span class="attr">"site"</span>: <span class="string">"YouTube"</span>,
      <span class="attr">"size"</span>: <span class="number">720</span>,
      <span class="attr">"type"</span>: <span class="string">"Teaser"</span>
    },
    {
      <span class="attr">"id"</span>: <span class="string">"5a7833440e0a26597f010849"</span>,
      <span class="attr">"iso_639_1"</span>: <span class="string">"en"</span>,
      <span class="attr">"iso_3166_1"</span>: <span class="string">"US"</span>,
      <span class="attr">"key"</span>: <span class="string">"pVxOVlm_lE8"</span>,
      <span class="attr">"name"</span>: <span class="string">"Big Game Spot"</span>,
      <span class="attr">"site"</span>: <span class="string">"YouTube"</span>,
      <span class="attr">"size"</span>: <span class="number">1080</span>,
      <span class="attr">"type"</span>: <span class="string">"Teaser"</span>
    },
    {
      <span class="attr">"id"</span>: <span class="string">"5aabd7e69251413feb011276"</span>,
      <span class="attr">"iso_639_1"</span>: <span class="string">"en"</span>,
      <span class="attr">"iso_3166_1"</span>: <span class="string">"US"</span>,
      <span class="attr">"key"</span>: <span class="string">"QwievZ1Tx-8"</span>,
      <span class="attr">"name"</span>: <span class="string">"Official Trailer #2"</span>,
      <span class="attr">"site"</span>: <span class="string">"YouTube"</span>,
      <span class="attr">"size"</span>: <span class="number">1080</span>,
      <span class="attr">"type"</span>: <span class="string">"Trailer"</span>
    },
    {
      <span class="attr">"id"</span>: <span class="string">"5aea2ed2c3a3682bf7001205"</span>,
      <span class="attr">"iso_639_1"</span>: <span class="string">"en"</span>,
      <span class="attr">"iso_3166_1"</span>: <span class="string">"US"</span>,
      <span class="attr">"key"</span>: <span class="string">"LXPaDL_oILs"</span>,
      <span class="attr">"name"</span>: <span class="string">"\"Legacy\" TV Spot"</span>,
      <span class="attr">"site"</span>: <span class="string">"YouTube"</span>,
      <span class="attr">"size"</span>: <span class="number">1080</span>,
      <span class="attr">"type"</span>: <span class="string">"Teaser"</span>
    },
    {
      <span class="attr">"id"</span>: <span class="string">"5aea2f3e92514172a7001672"</span>,
      <span class="attr">"iso_639_1"</span>: <span class="string">"en"</span>,
      <span class="attr">"iso_3166_1"</span>: <span class="string">"US"</span>,
      <span class="attr">"key"</span>: <span class="string">"PbRmbhdHDDM"</span>,
      <span class="attr">"name"</span>: <span class="string">"\"Family\" Featurette"</span>,
      <span class="attr">"site"</span>: <span class="string">"YouTube"</span>,
      <span class="attr">"size"</span>: <span class="number">1080</span>,
      <span class="attr">"type"</span>: <span class="string">"Featurette"</span>
    }
  ]
}</code></pre>
<p>å¯¹äºä¸Šè¿°å“åº”ä½“ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªPOJOç±»ã€‚è®©æˆ‘ä»¬å…ˆæ„å»ºå®ƒã€‚åœ¨modelsåŒ…ä¸­åˆ›å»ºåä¸ºtrailer_model.dartçš„æ–‡ä»¶ã€‚å¤åˆ¶ç²˜è´´ä¸‹é¢çš„ä»£ç ã€‚</p>
<pre><code class="dart"><span class="class"><span class="keyword">class</span> <span class="title">TrailerModel</span> </span>{
  <span class="built_in">int</span> _id;
  <span class="built_in">List</span>&lt;_Result&gt; _results = [];

  TrailerModel.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="keyword">dynamic</span>&gt; parsedJson) {
    _id = parsedJson[<span class="string">'id'</span>];
    <span class="built_in">List</span>&lt;_Result&gt; temp = [];
    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; parsedJson[<span class="string">'results'</span>].length; i++) {
      _Result result = _Result(parsedJson[<span class="string">'results'</span>][i]);
      temp.add(result);
    }
    _results = temp;
  }

  <span class="built_in">List</span>&lt;_Result&gt; <span class="keyword">get</span> results =&gt; _results;

  <span class="built_in">int</span> <span class="keyword">get</span> id =&gt; _id;
}

<span class="class"><span class="keyword">class</span> <span class="title">_Result</span> </span>{
  <span class="built_in">String</span> _id;
  <span class="built_in">String</span> _iso_639_1;
  <span class="built_in">String</span> _iso_3166_1;
  <span class="built_in">String</span> _key;
  <span class="built_in">String</span> _name;
  <span class="built_in">String</span> _site;
  <span class="built_in">int</span> _size;
  <span class="built_in">String</span> _type;

  _Result(result) {
    _id = result[<span class="string">'id'</span>];
    _iso_639_1 = result[<span class="string">'iso_639_1'</span>];
    _iso_3166_1 = result[<span class="string">'iso_3166_1'</span>];
    _key = result[<span class="string">'key'</span>];
    _name = result[<span class="string">'name'</span>];
    _site = result[<span class="string">'site'</span>];
    _size = result[<span class="string">'size'</span>];
    _type = result[<span class="string">'type'</span>];
  }

  <span class="built_in">String</span> <span class="keyword">get</span> id =&gt; _id;

  <span class="built_in">String</span> <span class="keyword">get</span> iso_639_1 =&gt; _iso_639_1;

  <span class="built_in">String</span> <span class="keyword">get</span> iso_3166_1 =&gt; _iso_3166_1;

  <span class="built_in">String</span> <span class="keyword">get</span> key =&gt; _key;

  <span class="built_in">String</span> <span class="keyword">get</span> name =&gt; _name;

  <span class="built_in">String</span> <span class="keyword">get</span> site =&gt; _site;

  <span class="built_in">int</span> <span class="keyword">get</span> size =&gt; _size;

  <span class="built_in">String</span> <span class="keyword">get</span> type =&gt; _type;
}
</code></pre>
<p>ç°åœ¨è®©æˆ‘ä»¬åœ¨movie_api_provider.dartå®ç°ç½‘ç»œè¯·æ±‚ã€‚å¤åˆ¶å¹¶ç²˜è´´ä¸€ä¸‹å†…å®¹åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="dart"><span class="keyword">import</span> <span class="string">'dart:async'</span>;
<span class="keyword">import</span> <span class="string">'package:http/http.dart'</span> show Client;
<span class="keyword">import</span> <span class="string">'dart:convert'</span>;
<span class="keyword">import</span> <span class="string">'../models/item_model.dart'</span>;
<span class="keyword">import</span> <span class="string">'../models/trailer_model.dart'</span>;

<span class="class"><span class="keyword">class</span> <span class="title">MovieApiProvider</span> </span>{
  Client client = Client();
  <span class="keyword">final</span> _apiKey = <span class="string">'802b2c4b88ea1183e50e6b285a27696e'</span>;
  <span class="keyword">final</span> _baseUrl = <span class="string">"http://api.themoviedb.org/3/movie"</span>;

  Future&lt;ItemModel&gt; fetchMovieList() <span class="keyword">async</span> {
    <span class="keyword">final</span> response = <span class="keyword">await</span> client.<span class="keyword">get</span>(<span class="string">"<span class="subst">$_baseUrl</span>/popular?api_key=<span class="subst">$_apiKey</span>"</span>);
    <span class="keyword">if</span> (response.statusCode == <span class="number">200</span>) {
      <span class="comment">// If the call to the server was successful, parse the JSON</span>
      <span class="keyword">return</span> ItemModel.fromJson(json.decode(response.body));
    } <span class="keyword">else</span> {
      <span class="comment">// If that call was not successful, throw an error.</span>
      <span class="keyword">throw</span> Exception(<span class="string">'Failed to load post'</span>);
    }
  }

  Future&lt;TrailerModel&gt; fetchTrailer(<span class="built_in">int</span> movieId) <span class="keyword">async</span> {
    <span class="keyword">final</span> response =
        <span class="keyword">await</span> client.<span class="keyword">get</span>(<span class="string">"<span class="subst">$_baseUrl</span>/<span class="subst">$movieId</span>/videos?api_key=<span class="subst">$_apiKey</span>"</span>);

    <span class="keyword">if</span> (response.statusCode == <span class="number">200</span>) {
      <span class="keyword">return</span> TrailerModel.fromJson(json.decode(response.body));
    } <span class="keyword">else</span> {
      <span class="keyword">throw</span> Exception(<span class="string">'Failed to load trailers'</span>);
    }
  }
}
</code></pre>
<p>fetchTrailerï¼ˆmovie_idï¼‰æ˜¯æˆ‘ä»¬è¯·æ±‚APIå¹¶å°†JSONå“åº”è½¬æ¢ä¸ºTrailerModelå¯¹è±¡å¹¶è¿”å›Future<trailermodel>çš„æ–¹æ³•ã€‚</trailermodel></p>
<p>ç°åœ¨è®©æˆ‘ä»¬é€šè¿‡æ·»åŠ è¿™ä¸ªæ–°çš„ç½‘ç»œè¯·æ±‚å®ç°æ¥æ›´æ–°repository.dartæ–‡ä»¶ã€‚å¤åˆ¶å¹¶ç²˜è´´repository.dartæ–‡ä»¶ä¸­çš„ä»£ç ã€‚</p>
<pre><code class="dart"><span class="keyword">import</span> <span class="string">'dart:async'</span>;
<span class="keyword">import</span> <span class="string">'movie_api_provider.dart'</span>;
<span class="keyword">import</span> <span class="string">'../models/item_model.dart'</span>;
<span class="keyword">import</span> <span class="string">'../models/trailer_model.dart'</span>;

<span class="class"><span class="keyword">class</span> <span class="title">Repository</span> </span>{
  <span class="keyword">final</span> moviesApiProvider = MovieApiProvider();

  Future&lt;ItemModel&gt; fetchAllMovies() =&gt; moviesApiProvider.fetchMovieList();

  Future&lt;TrailerModel&gt; fetchTrailers(<span class="built_in">int</span> movieId) =&gt; moviesApiProvider.fetchTrailer(movieId);
}</code></pre>
<p>ç°åœ¨æ˜¯å®ç°Scoped Instance BLoCæ–¹æ³•çš„æ—¶å€™äº†ã€‚åœ¨blocsåŒ…ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶movie_detail_bloc.dartã€‚åœ¨åŒä¸€ä¸ªblocsåŒ…ä¸­å†åˆ›å»ºä¸€ä¸ªæ–‡ä»¶movie_detail_bloc_provider.dartã€‚</p>
<p>è¿™æ˜¯movie_detail_bloc_provider.dartæ–‡ä»¶çš„ä»£ç ã€‚</p>
<pre><code class="dart"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;
<span class="keyword">import</span> <span class="string">'movie_detail_bloc.dart'</span>;
<span class="keyword">export</span> <span class="string">'movie_detail_bloc.dart'</span>;

<span class="class"><span class="keyword">class</span> <span class="title">MovieDetailBlocProvider</span> <span class="keyword">extends</span> <span class="title">InheritedWidget</span> </span>{
  <span class="keyword">final</span> MovieDetailBloc bloc;

  MovieDetailBlocProvider({Key key, Widget child})
      : bloc = MovieDetailBloc(),
        <span class="keyword">super</span>(key: key, child: child);

  <span class="meta">@override</span>
  <span class="built_in">bool</span> updateShouldNotify(_) {
    <span class="keyword">return</span> <span class="keyword">true</span>;
  }

  <span class="keyword">static</span> MovieDetailBloc of(BuildContext context) {
    <span class="keyword">return</span> (context.inheritFromWidgetOfExactType(MovieDetailBlocProvider)
            <span class="keyword">as</span> MovieDetailBlocProvider)
        .bloc;
  }
}</code></pre>
<p>æ­¤ç±»æ‰©å±•äº†InheritedWidgetï¼Œå¹¶é€šè¿‡of(context)æ–¹æ³•æä¾›å¯¹blocçš„è®¿é—®ã€‚æ­£å¦‚ä½ æ‰€è§ï¼Œof(contextï¼‰æœŸæœ›å°†contextä½œä¸ºå‚æ•°ã€‚æ­¤contextå±äºInheritedWidgetåŒ…è£…äº†çš„é¡µé¢ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæ˜¯ç”µå½±è¯¦æƒ…é¡µã€‚</p>
<p>è®©æˆ‘ä»¬ç¼–å†™movie_detail_bloc.dartçš„ä»£ç ã€‚å°†ä»¥ä¸‹ä»£ç å¤åˆ¶ç²˜è´´åˆ°blocæ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="dart"><span class="keyword">import</span> <span class="string">'dart:async'</span>;

<span class="keyword">import</span> <span class="string">'package:rxdart/rxdart.dart'</span>;
<span class="keyword">import</span> <span class="string">'../models/trailer_model.dart'</span>;
<span class="keyword">import</span> <span class="string">'../resources/repository.dart'</span>;

<span class="class"><span class="keyword">class</span> <span class="title">MovieDetailBloc</span> </span>{
  <span class="keyword">final</span> _repository = Repository();
  <span class="keyword">final</span> _movieId = PublishSubject&lt;<span class="built_in">int</span>&gt;();
  <span class="keyword">final</span> _trailers = BehaviorSubject&lt;Future&lt;TrailerModel&gt;&gt;();

  <span class="built_in">Function</span>(<span class="built_in">int</span>) <span class="keyword">get</span> fetchTrailersById =&gt; _movieId.sink.add;
  Observable&lt;Future&lt;TrailerModel&gt;&gt; <span class="keyword">get</span> movieTrailers =&gt; _trailers.stream;

  MovieDetailBloc() {
    _movieId.stream.transform(_itemTransformer()).pipe(_trailers);
  }

  dispose() <span class="keyword">async</span> {
    _movieId.close();
    <span class="keyword">await</span> _trailers.drain();
    _trailers.close();
  }

  _itemTransformer() {
    <span class="keyword">return</span> ScanStreamTransformer(
      (Future&lt;TrailerModel&gt; trailer, <span class="built_in">int</span> id, <span class="built_in">int</span> index) {
        <span class="built_in">print</span>(index);
        trailer = _repository.fetchTrailers(id);
        <span class="keyword">return</span> trailer;
      },
    );
  }
}
</code></pre>
<p>è®©æˆ‘è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„ä»£ç ã€‚ä»æœåŠ¡å™¨è·å–é¢„å‘Šç‰‡åˆ—è¡¨èƒŒåçš„æ€æƒ³æ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»å°†movieIdä¼ é€’ç»™é¢„å‘Šç‰‡APIï¼Œå®ƒå°†è¿”å›ç»™æˆ‘ä»¬é¢„å‘Šç‰‡åˆ—è¡¨ã€‚ä¸ºäº†å®ç°è¿™ä¸ªï¼Œæˆ‘ä»¬å°†ä½¿ç”¨RxDartçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå³<a href="https://pub.dartlang.org/documentation/rxdart/latest/rx_transformers/rx_transformers-library.html">å˜å½¢</a>ã€‚</p>
<h2 id="å˜å½¢"><a href="#å˜å½¢" class="headerlink" title="å˜å½¢"></a>å˜å½¢</h2><p>å˜å½¢çš„ä¸»è¦ä½œç”¨æ˜¯å¸®åŠ©é“¾æ¥ä¸¤ä¸ªæˆ–æ›´å¤šä¸ª<a href="https://pub.dartlang.org/documentation/rxdart/latest/rx_subjects/rx_subjects-library.html">Subject</a>å¹¶è·å¾—æœ€ç»ˆçš„ç»“æœã€‚æ€æƒ³æ˜¯ï¼Œå¦‚æœä½ æƒ³åœ¨å¯¹æ•°æ®æ‰§è¡ŒæŸäº›æ“ä½œåå°†æ•°æ®ä»ä¸€ä¸ª<a href="https://pub.dartlang.org/documentation/rxdart/latest/rx_subjects/rx_subjects-library.html">Subject</a>ä¼ é€’åˆ°å¦ä¸€ä¸ª<a href="https://pub.dartlang.org/documentation/rxdart/latest/rx_subjects/rx_subjects-library.html">Subject</a>ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å˜æ¢å™¨å¯¹æ¥è‡ªç¬¬ä¸€ä¸ª<a href="https://pub.dartlang.org/documentation/rxdart/latest/rx_subjects/rx_subjects-library.html">Subject</a>çš„è¾“å…¥æ•°æ®æ‰§è¡Œæ“ä½œï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ä¸‹ä¸€ä¸ª<a href="https://pub.dartlang.org/documentation/rxdart/latest/rx_subjects/rx_subjects-library.html">Subject</a>ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å°†movieIdæ·»åŠ åˆ°_movieIdï¼Œè¿™æ˜¯ä¸€ä¸ª<a href="https://pub.dartlang.org/documentation/rxdart/latest/rx/PublishSubject-class.html">PublishSubject</a>ã€‚æˆ‘ä»¬å°†movieIdä¼ é€’ç»™ScanStreamTransformerï¼Œç„¶åScanStreamTransformerå°†è¯·æ±‚é¢„å‘Šç‰‡APIå¹¶è·å–ç»“æœå¹¶å°†å…¶ä¼ é€’ç»™_trailersï¼Œè¿™æ˜¯ä¸€ä¸ª<a href="https://pub.dartlang.org/documentation/rxdart/latest/rx/BehaviorSubject-class.html">BehaviorSubject</a>ã€‚è¿™æ˜¯ä¸€å¼ é˜é‡Šæˆ‘çš„è¯´æ˜çš„å°å›¾ã€‚</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*8EKpbLKC61gkS8jstJ_9kQ.png" alt></p>
<p>æœ€åä¸€æ­¥æ˜¯ï¼Œä½¿MovieDetailé¡µé¢å¯ä»¥è®¿é—®movieDetailBlocã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°openDetailPage()æ–¹æ³•ã€‚è¿™æ˜¯movie_list.dartæ–‡ä»¶çš„æ›´æ–°ä»£ç ã€‚</p>
<pre><code class="dart"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;
<span class="keyword">import</span> <span class="string">'../models/item_model.dart'</span>;
<span class="keyword">import</span> <span class="string">'../blocs/movies_bloc.dart'</span>;
<span class="keyword">import</span> <span class="string">'movie_detail.dart'</span>;
<span class="keyword">import</span> <span class="string">'../blocs/movie_detail_bloc_provider.dart'</span>;

<span class="class"><span class="keyword">class</span> <span class="title">MovieList</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>{
  <span class="meta">@override</span>
  State&lt;StatefulWidget&gt; createState() {
    <span class="keyword">return</span> MovieListState();
  }
}

<span class="class"><span class="keyword">class</span> <span class="title">MovieListState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MovieList</span>&gt; </span>{
  <span class="meta">@override</span>
  <span class="keyword">void</span> initState() {
    <span class="keyword">super</span>.initState();
    bloc.fetchAllMovies();
  }

  <span class="meta">@override</span>
  <span class="keyword">void</span> dispose() {
    bloc.dispose();
    <span class="keyword">super</span>.dispose();
  }

  <span class="meta">@override</span>
  Widget build(BuildContext context) {
    <span class="keyword">return</span> Scaffold(
      appBar: AppBar(
        title: Text(<span class="string">'Popular Movies'</span>),
      ),
      body: StreamBuilder(
        stream: bloc.allMovies,
        builder: (context, AsyncSnapshot&lt;ItemModel&gt; snapshot) {
          <span class="keyword">if</span> (snapshot.hasData) {
            <span class="keyword">return</span> buildList(snapshot);
          } <span class="keyword">else</span> <span class="keyword">if</span> (snapshot.hasError) {
            <span class="keyword">return</span> Text(snapshot.error.toString());
          }
          <span class="keyword">return</span> Center(child: CircularProgressIndicator());
        },
      ),
    );
  }

  Widget buildList(AsyncSnapshot&lt;ItemModel&gt; snapshot) {
    <span class="keyword">return</span> GridView.builder(
        itemCount: snapshot.data.results.length,
        gridDelegate:
        <span class="keyword">new</span> SliverGridDelegateWithFixedCrossAxisCount(crossAxisCount: <span class="number">2</span>),
        itemBuilder: (BuildContext context, <span class="built_in">int</span> index) {
          <span class="keyword">return</span> GridTile(
            child: InkResponse(
              enableFeedback: <span class="keyword">true</span>,
              child: Image.network(
                <span class="string">'https://image.tmdb.org/t/p/w185<span class="subst">${snapshot.data</span></span>
<span class="string"><span class="subst">                    .results[index].poster_path}</span>'</span>,
                fit: BoxFit.cover,
              ),
              onTap: () =&gt; openDetailPage(snapshot.data, index),
            ),
          );
        });
  }

  openDetailPage(ItemModel data, <span class="built_in">int</span> index) {
    Navigator.push(
      context,
      MaterialPageRoute(builder: (context) {
        <span class="keyword">return</span> MovieDetailBlocProvider(
          child: MovieDetail(
            title: data.results[index].title,
            posterUrl: data.results[index].backdrop_path,
            description: data.results[index].overview,
            releaseDate: data.results[index].release_date,
            voteAverage: data.results[index].vote_average.toString(),
            movieId: data.results[index].id,
          ),
        );
      }),
    );
  }
}</code></pre>
<p>æ­£å¦‚æ‚¨åœ¨MaterialPageRouteä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæˆ‘ä»¬å°†è¿”å›MovieDetailBlocProviderï¼ˆInheritedWidgetï¼‰å¹¶å°†MovieDetailé¡µé¢åŒ…è£…åˆ°å…¶ä¸­ã€‚è¿™æ ·MovieDetailBlocç±»å°±å¯ä»¥åœ¨è¯¦æƒ…é¡µé¢ä»¥åŠå®ƒä¸‹é¢çš„æ‰€æœ‰widgetä¸­è®¿é—®ã€‚</p>
<p>æœ€åï¼Œè¿™æ˜¯movie_detail.dartæ–‡ä»¶çš„ä»£ç ã€‚</p>
<pre><code class="dart"><span class="keyword">import</span> <span class="string">'dart:async'</span>;

<span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;
<span class="keyword">import</span> <span class="string">'../blocs/movie_detail_bloc_provider.dart'</span>;
<span class="keyword">import</span> <span class="string">'../models/trailer_model.dart'</span>;

<span class="class"><span class="keyword">class</span> <span class="title">MovieDetail</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>{
  <span class="keyword">final</span> posterUrl;
  <span class="keyword">final</span> description;
  <span class="keyword">final</span> releaseDate;
  <span class="keyword">final</span> <span class="built_in">String</span> title;
  <span class="keyword">final</span> <span class="built_in">String</span> voteAverage;
  <span class="keyword">final</span> <span class="built_in">int</span> movieId;

  MovieDetail({
    <span class="keyword">this</span>.title,
    <span class="keyword">this</span>.posterUrl,
    <span class="keyword">this</span>.description,
    <span class="keyword">this</span>.releaseDate,
    <span class="keyword">this</span>.voteAverage,
    <span class="keyword">this</span>.movieId,
  });

  <span class="meta">@override</span>
  State&lt;StatefulWidget&gt; createState() {
    <span class="keyword">return</span> MovieDetailState(
      title: title,
      posterUrl: posterUrl,
      description: description,
      releaseDate: releaseDate,
      voteAverage: voteAverage,
      movieId: movieId,
    );
  }
}

<span class="class"><span class="keyword">class</span> <span class="title">MovieDetailState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MovieDetail</span>&gt; </span>{
  <span class="keyword">final</span> posterUrl;
  <span class="keyword">final</span> description;
  <span class="keyword">final</span> releaseDate;
  <span class="keyword">final</span> <span class="built_in">String</span> title;
  <span class="keyword">final</span> <span class="built_in">String</span> voteAverage;
  <span class="keyword">final</span> <span class="built_in">int</span> movieId;

  MovieDetailBloc bloc;

  MovieDetailState({
    <span class="keyword">this</span>.title,
    <span class="keyword">this</span>.posterUrl,
    <span class="keyword">this</span>.description,
    <span class="keyword">this</span>.releaseDate,
    <span class="keyword">this</span>.voteAverage,
    <span class="keyword">this</span>.movieId,
  });

  <span class="meta">@override</span>
  <span class="keyword">void</span> didChangeDependencies() {
    bloc = MovieDetailBlocProvider.of(context);
    bloc.fetchTrailersById(movieId);
    <span class="keyword">super</span>.didChangeDependencies();
  }

  <span class="meta">@override</span>
  <span class="keyword">void</span> dispose() {
    bloc.dispose();
    <span class="keyword">super</span>.dispose();
  }

  <span class="meta">@override</span>
  Widget build(BuildContext context) {
    <span class="keyword">return</span> Scaffold(
      body: SafeArea(
        top: <span class="keyword">false</span>,
        bottom: <span class="keyword">false</span>,
        child: NestedScrollView(
          headerSliverBuilder: (BuildContext context,
              <span class="built_in">bool</span> innerBoxIsScrolled) {
            <span class="keyword">return</span> &lt;Widget&gt;[
              SliverAppBar(
                expandedHeight: <span class="number">200.0</span>,
                floating: <span class="keyword">false</span>,
                pinned: <span class="keyword">true</span>,
                elevation: <span class="number">0.0</span>,
                flexibleSpace: FlexibleSpaceBar(
                    background: Image.network(
                      <span class="string">"https://image.tmdb.org/t/p/w500<span class="subst">$posterUrl</span>"</span>,
                      fit: BoxFit.cover,
                    )),
              ),
            ];
          },
          body: Padding(
            padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">10.0</span>),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: &lt;Widget&gt;[
                Container(margin: EdgeInsets.only(top: <span class="number">5.0</span>)),
                Text(
                  title,
                  style: TextStyle(
                    fontSize: <span class="number">25.0</span>,
                    fontWeight: FontWeight.bold,
                  ),
                ),
                Container(margin: EdgeInsets.only(top: <span class="number">8.0</span>,
                    bottom: <span class="number">8.0</span>)),
                Row(
                  children: &lt;Widget&gt;[
                    Icon(
                      Icons.favorite,
                      color: Colors.red,
                    ),
                    Container(
                      margin: EdgeInsets.only(left: <span class="number">1.0</span>,
                          right: <span class="number">1.0</span>),
                    ),
                    Text(
                      voteAverage,
                      style: TextStyle(
                        fontSize: <span class="number">18.0</span>,
                      ),
                    ),
                    Container(
                      margin: EdgeInsets.only(left: <span class="number">10.0</span>,
                          right: <span class="number">10.0</span>),
                    ),
                    Text(
                      releaseDate,
                      style: TextStyle(
                        fontSize: <span class="number">18.0</span>,
                      ),
                    ),
                  ],
                ),
                Container(margin: EdgeInsets.only(top: <span class="number">8.0</span>,
                    bottom: <span class="number">8.0</span>)),
                Text(description),
                Container(margin: EdgeInsets.only(top: <span class="number">8.0</span>,
                    bottom: <span class="number">8.0</span>)),
                Text(
                  <span class="string">"Trailer"</span>,
                  style: TextStyle(
                    fontSize: <span class="number">25.0</span>,
                    fontWeight: FontWeight.bold,
                  ),
                ),
                Container(margin: EdgeInsets.only(top: <span class="number">8.0</span>,
                    bottom: <span class="number">8.0</span>)),
                StreamBuilder(
                  stream: bloc.movieTrailers,
                  builder:
                      (context, AsyncSnapshot&lt;Future&lt;TrailerModel&gt;&gt; snapshot) {
                    <span class="keyword">if</span> (snapshot.hasData) {
                      <span class="keyword">return</span> FutureBuilder(
                        future: snapshot.data,
                        builder: (context,
                            AsyncSnapshot&lt;TrailerModel&gt; itemSnapShot) {
                          <span class="keyword">if</span> (itemSnapShot.hasData) {
                            <span class="keyword">if</span> (itemSnapShot.data.results.length &gt; <span class="number">0</span>)
                              <span class="keyword">return</span> trailerLayout(itemSnapShot.data);
                            <span class="keyword">else</span>
                              <span class="keyword">return</span> noTrailer(itemSnapShot.data);
                          } <span class="keyword">else</span> {
                            <span class="keyword">return</span> Center(child: CircularProgressIndicator());
                          }
                        },
                      );
                    } <span class="keyword">else</span> {
                      <span class="keyword">return</span> Center(child: CircularProgressIndicator());
                    }
                  },
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }

  Widget noTrailer(TrailerModel data) {
    <span class="keyword">return</span> Center(
      child: Container(
        child: Text(<span class="string">"No trailer available"</span>),
      ),
    );
  }

  Widget trailerLayout(TrailerModel data) {
    <span class="keyword">if</span> (data.results.length &gt; <span class="number">1</span>) {
      <span class="keyword">return</span> Row(
        children: &lt;Widget&gt;[
          trailerItem(data, <span class="number">0</span>),
          trailerItem(data, <span class="number">1</span>),
        ],
      );
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> Row(
        children: &lt;Widget&gt;[
          trailerItem(data, <span class="number">0</span>),
        ],
      );
    }
  }

  trailerItem(TrailerModel data, <span class="built_in">int</span> index) {
    <span class="keyword">return</span> Expanded(
      child: Column(
        children: &lt;Widget&gt;[
          Container(
            margin: EdgeInsets.all(<span class="number">5.0</span>),
            height: <span class="number">100.0</span>,
            color: Colors.grey,
            child: Center(child: Icon(Icons.play_circle_filled)),
          ),
          Text(
            data.results[index].name,
            maxLines: <span class="number">1</span>,
            overflow: TextOverflow.ellipsis,
          ),
        ],
      ),
    );
  }
}</code></pre>
<p>è¿™é‡Œæœ‰å¾ˆå¤šäº‹æƒ…éœ€è¦æ³¨æ„ã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥åœ¨didChangeDependencies()ä¸­åˆå§‹åŒ–MovieDetailBlocçš„åŸå› æ˜¯<a href="https://docs.flutter.io/flutter/widgets/SingleTickerProviderStateMixin/didChangeDependencies.html">è¿™ä¸ª</a>ã€‚ä½ è¿˜å¯ä»¥çœ‹åˆ°StreamBuilderçš„å¿«ç…§æ•°æ®åŒ…å«Future<trailermodel>ï¼Œå®ƒåªèƒ½ç”±FutureBuilderä½¿ç”¨ã€‚</trailermodel></p>
<p>æˆ‘ä¸ä¼šæ·±å…¥è§£é‡Šè¿™äº›å†…å®¹ï¼Œå› ä¸ºè¿™ç¯‡æ–‡ç« å·²ç»å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œæˆ‘å·²ç»ä»‹ç»äº†å¾ˆå¤šæ–°ä¸œè¥¿ã€‚å¦‚æœæ‚¨éœ€è¦ä»»ä½•å¸®åŠ©ï¼Œè¯·éšæ—¶é€šè¿‡LinkedInï¼ŒTwitterä¸æˆ‘è”ç³»æˆ–åœ¨ä¸‹é¢å‘è¡¨æ‚¨çš„è¯„è®ºã€‚</p>
<p>æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™äº›å†…å®¹å¹¶å­¦åˆ°å¾ˆå¤šæ–°ä¸œè¥¿ã€‚æˆ‘åªæƒ³å‘Šè¯‰ä½ ï¼Œèµ·åˆå¾ˆéš¾ç†è§£å®ƒã€‚ç›¸ä¿¡æˆ‘ï¼Œå¦‚æœä½ è¿›ä¸€æ­¥é˜…è¯»æˆ‘åœ¨è¿™é‡Œè§¦åŠçš„æ‰€æœ‰è¯é¢˜ï¼Œä½ ä¼šå‘ç°å®ƒéå¸¸ç®€å•ã€‚è¯·å¤§å£°ğŸ‘</p>
<p>å¦‚æœä½ æƒ³è¦å®Œæ•´çš„ä»£ç ã€‚è¿™æ˜¯é¡¹ç›®çš„<a href="https://github.com/SAGARSURI/MyMovies">githubåœ°å€</a>ã€‚</p>
